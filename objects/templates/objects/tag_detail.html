{% extends 'base.html' %}
{% block body_block %}
<div class="container tags-bg">
  {% if no_public_objects %}
    <p>Nothing has been tagged with "{{ tag }}" yet. Check back soon!</p>
    <br>
  {% elif no_member_objects %}
    <p>Nothing tagged with "{{ tag }}" has been published yet. Check back soon!</p>
    <br>
  {% else %}
    {% include './tag_detail_button_bar.html' %}
    <!-- Posts -->
    {% if posts %}
      <h4 class="tag-title">Posts</h4>
      {% for post in posts %}
        {% if post.is_public and not post.members_only or post.is_public and request.user.is_authenticated or post.owner.pk == request.user.pk %}
          <div class="container">
            <p>
              <a href="{% url 'posts:post_detail' post.slug %}">
                {{ post.title }}
              </a>
              <br>
              By <a href="{% url 'members:member_profile' post.owner.username %}">{{ post.owner }}</a>
            </p>
            {% if post.members_only %}
              <span class="badge badge-warning">Members Only</span>
            {% endif %}
            {% if not post.is_public %}
              <span class="badge badge-secondary">Unpublished</span>
            {% endif %}
          </div>
        {% endif %}
      {% endfor %}
      <br>
      <p>
        <a href="{% url 'objects:support_document_tag' tag.slug %}">more documentation tagged with "{{ tag }}" ...</a>
      </p>
      <br>
    {% endif %}
    <!-- Documents -->
    {% if documents %}
      <h4 class="tag-title">Documentation</h4>
      {% for document in documents %}
        {% if document.is_public or document.owner.pk == request.user.pk %}
          <div class="container">
            <p>
              <a href="{% url 'documentation:support_document_detail' document.slug %}">
                {{ document.title }}
              </a>
              <br>
              By <a href="{% url 'members:member_profile' document.owner.username %}">{{ document.owner }}
            </p>
            {% if not document.is_public %}
              <span class="badge badge-secondary">Unpublished</span>
            {% endif %}
          </div>
        {% endif %}
      {% endfor %}
      <br>
      <p>
        <a href="{% url 'objects:support_document_tag' tag.slug %}">more documentation tagged with "{{ tag }}" ...</a>
      </p>
      <br>
    {% endif %}
    {% if images %}
      <h4 class="tag-title">Images</h4>
      {% for image in images %}
        {% if image.is_public or image.owner.pk == request.user.pk %}
          <div class="container">
            <a href="{% url 'objects:image_detail' image.pk %}">
              <div class="studio-image-card float-left" style="background-image:url('/media/{{ image.thumbnail_file }}')">
                {% if not image.is_public %}
                  <span class="badge badge-secondary">Unpublished</span>
                {% endif %}
              </div>
            </a>
          </div>
        {% endif %}
      {% endfor %}
      <div class="clear"></div>
      <br>
      <p>
        <a href="{% url 'objects:image_tag' tag.slug %}">more images tagged with "{{ tag }}" ...</a>
      </p>
      <br>
    {% endif %}
    {% if videos %}
      <h4 class="tag-title">Videos</h4>
      {% for video in videos %}
        {% if video.is_public or video.owner.pk == request.user.pk %}
          <div class="container">
            <p>
              <a href="{% url 'objects:video_detail' video.pk %}">
                {{ video.title }}
              </a><br>
              {{ video.credit }}
              {% if not video.is_public %}
                <div class="container">
                  <span class="badge badge-secondary">Unpublished</span>
                </div>
              {% endif %}
            </p>
          </div>
        {% endif %}
      {% endfor %}
      <p>
        <a href="{% url 'objects:video_tag' tag.slug %}">more videos tagged with "{{ tag }}"...</a>
      </p>
      <br>
    {% endif %}
    {% if sounds %}
      <h4 class="tag-title">Sounds</h4>
      {% for sound in sounds %}
        {% if sound.is_public or sound.owner.pk == request.user.pk %}
          <div class="container">
            <p>
              <a href="{% url 'objects:sound_detail' sound.pk %}">
                {{ sound.title }}
              </a><br>
              {{ sound.credit }}
              {% if not sound.is_public %}
                <div class="container">
                  <span class="badge badge-secondary">Unpublished</span>
                </div>
              {% endif %}
            </p>
          </div>
        {% endif %}
      {% endfor %}
      <p>
        <a href="{% url 'objects:sound_tag' tag.slug %}">more sounds tagged with "{{ tag }}"...</a>
      </p>
      <br>
    {% endif %}
    {% if codes %}
      <h4 class="tag-title">Code</span></h4>
      {% for code in codes %}
        {% if code.is_public or code.owner.pk == request.user.pk %}
          <div class="container float-left">
            <a href="{% url 'objects:code_detail' code.pk %}">
              {{ code.title }}
            </a>
            <p>{{ code.language }} {{ code.language_version }}</p>
            {% if code.owner.pk == request.user.pk and not code.is_public%}
              <span class="badge badge-secondary">Unpublished</span>
            {% endif %}
          </div>
        {% endif %}
      {% endfor %}
      <p>
        <a href="{% url 'objects:code_tag' tag.slug %}">more code tagged with "{{ tag }}"...</a>
      </p>
      <br>
    {% endif %}
    {% if links %}
      <h4 class="tag-title">Links</span></h4>
      {% for link in links %}
        {% if link.is_public or link.owner.pk == request.user.pk %}
          <div class="container">
            <a href="{% url 'objects:link_detail' link.pk %}">
              {% if link.title %}
                <p>{{ link.title }}</p>
              {% else %}
                <p>Untitled Link</p>
              {% endif %}
            </a>
            {% if link.favicon_href %}
              <div class="link-list-card float-left" style="background-image:url('{{ link.favicon_href }}')"></div>
            {% endif %}
            <p class="link-list-link">{{ link.url }}</p>
            {% if not link.is_public %}
              <span class="badge badge-secondary">Unpublished</span>
            {% endif %}
          </div>
        {% endif %}
      {% endfor %}
      <p>
        <a href="{% url 'objects:link_tag' tag.slug %}">more links tagged with "{{ tag }}"...</a>
      </p>
      <br>
    {% endif %}
  {% endif %}
</div>
{% endblock %}
