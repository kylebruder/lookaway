{% extends "base.html" %}
{% block body_block %}
{% if profile.bg_image %}<div style="background-image: url('{{ profile.bg_image.image_file.url }}');">{% endif %}
<div class="container code-bg">
  {% if code.is_public or code.owner.pk == request.user.pk %}
    {% include './code_detail_button_bar.html' %}
    {% if code.file_path %}
      <span class="code-block"><strong>{{ code.file_path }}</strong></span><br>
    {% endif %}
    {% load custom_filters %}
    {{ code.code|highlight_syntax:code.file_path|safe }}
    {% if code.text %}
      <p>{{ code.text }}</p>
    {% endif %}
    {% if code.source %}
      <p>Source: {{ code.source }}</p>
    {% endif %}
    {% if code.source_url %}
      <p>Source URL: <a href="{{ code.source_url }}">{{ code.source_url }}</a></p>
    {% endif %}
    {% include './object_meta_data.html' %}
    <div class="row">
      <div class="col-sm">
        {% include 'objects/object_tags.html' %}
      </div>
      <div class="col-auto float-end">
        {% if code.is_public and can_add_marshmallow %}
          <a href="{% url 'objects:code_marshmallow' code.pk %}">
            <button type="button" class="btn btn-sm btn-light marshmallow-button float-end">M</button>
          </a>
        {% endif %}
      </div>
    </div>
    <br>
  {% else %}
    <p>This code sample has not been published yet.</p><br>
  {% endif %}
</div>  
{% if profile.bg_image %}</div>{% endif %}
{% endblock %}
  
